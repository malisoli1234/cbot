# ๐ค ุณุณุชู ุงุชููุงุณูู ุงุฑุฒูุง ุฏุฌุชุงู

ุงู ูพุฑูฺู ฺฉ ุณุณุชู ุงุชููุงุณูู ฺฉุงูู ุจุฑุง ูุฏุฑุช ูพุงูโูุง ุงุฑุฒูุง ุฏุฌุชุงู ุฏุฑ ุชูฺฏุฑุงู ุงุณุช ฺฉู ุดุงูู ูุจโุงุณฺฉุฑูพูฺฏุ ุฐุฎุฑูโุณุงุฒ ุฏุฑ ุฏุชุงุจุณ ู ูุฏุฑุช ุฎูุฏฺฉุงุฑ ูพุงูโูุง ูโุจุงุดุฏ.

## ๐๏ธ ุณุงุฎุชุงุฑ ูพุฑูฺู

```
currencies/
โโโ src/
โ   โโโ config/
โ   โ   โโโ database.js      # ุชูุธูุงุช ุฏุชุงุจุณ
โ   โ   โโโ sites.js         # ุชูุธูุงุช ุณุงุชโูุง ูุฎุชูู
โ   โโโ models/
โ   โ   โโโ Currency.js      # ูุฏู ุฏุชุงุจุณ
โ   โโโ services/
โ   โ   โโโ BrowserManager.js # ูุฏุฑุช ูุฑูุฑฺฏุฑ
โ   โ   โโโ ScrapingService.js # ุณุฑูุณ ุงุณฺฉุฑูพูฺฏ
โ   โโโ controllers/
โ   โ   โโโ SearchController.js # ฺฉูุชุฑูุฑ API
โ   โโโ server.js            # ุณุฑูุฑ ุงุตู
โ   โโโ telegram-bot.js      # ุฑุจุงุช ุชูฺฏุฑุงู
โโโ config.json              # ุชูุธูุงุช ุนููู
โโโ package.json
โโโ README.md
```

## ๐ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง
- Node.js (ูุณุฎู 14 ุง ุจุงูุงุชุฑ)
- MongoDB
- npm ุง yarn

### ูุตุจ dependencies
```bash
npm install
```

### ุชูุธู ุฏุชุงุจุณ
1. MongoDB ุฑู ูุตุจ ู ุงุฌุฑุง ฺฉูุฏ
2. ุฏุชุงุจุณ `currencies` ุฑู ุงุฌุงุฏ ฺฉูุฏ

### ุชูุธู ูุงู config.json
```json
{
  "minPayout": 70
}
```

## ๐ฏ ูฺฺฏโูุง

### โ ูฺฺฏโูุง ูุนู
- **ูุจโุงุณฺฉุฑูพูฺฏ ฺูุฏุณุงุชู**: ูพุดุชุจุงู ุงุฒ ุณุงุชโูุง ูุฎุชูู
- **ุฐุฎุฑูโุณุงุฒ ุฏุฑ ุฏุชุงุจุณ**: ุชูุงู ุฌุณุชุฌููุง ุฏุฑ MongoDB ุฐุฎุฑู ูโุดููุฏ
- **ุฑุจุงุช ุชูฺฏุฑุงู ููุดููุฏ**: ูุฏุฑุช ุฎูุฏฺฉุงุฑ ูพุงูโูุง ฺฉุงูุงู
- **ููุชุฑ ฺฉุฑุฏู ุฎูุฏฺฉุงุฑ**: ุญุฐู ูพุงูโูุง ุจุง payout ูพุงู
- **API ฺฉุงูู**: ุงูฺฉุงู ุฌุณุชุฌู ู ุฏุฑุงูุช ุชุงุฑุฎฺู
- **ุณุงุฎุชุงุฑ ูุงฺููุงุฑ**: ูุงุจูุช ุงุถุงูู ฺฉุฑุฏู ุณุงุชโูุง ุฌุฏุฏ

### ๐ง ูุงุจูุชโูุง ูู
- **ูุฏุฑุช ูุฑูุฑฺฏุฑ**: ุงุณุชูุงุฏู ุงุฒ Puppeteer ุจุฑุง ุงุณฺฉุฑูพูฺฏ
- **ุตู ูพุฑุฏุงุฒุด**: ูุฏุฑุช ููุฒูุงู ุฏุฑุฎูุงุณุชโูุง
- **ูุงฺฏโฺฏุฑ**: ุซุจุช ุชูุงู ุนููุงุช
- **ูุฏุฑุช ุฎุทุง**: handling ุฎุทุงูุง ูุฎุชูู
- **Graceful Shutdown**: ุจุณุชู ุตุญุญ ุจุฑูุงูู

## ๐ก API Endpoints

### ุฌุณุชุฌู ุงุฑุฒ
```http
POST /api/search
Content-Type: application/json

{
  "currency": "BTC",
  "telegramMessageId": 123,
  "telegramChannelId": "-1002498428726"
}
```

### ุฏุฑุงูุช ุชุงุฑุฎฺู
```http
GET /api/history?limit=50&offset=0
```

### ุฏุฑุงูุช ุฌุณุชุฌู ุฎุงุต
```http
GET /api/search/:id
```

### ุจุฑุฑุณ ูุถุนุช ุณุฑูุฑ
```http
GET /health
```

## ๐ค ุฑุจุงุช ุชูฺฏุฑุงู

ุฑุจุงุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ:
- ูพุงูโูุง ุฌุฏุฏ ฺฉุงูุงู ุฑู ูุงูุชูุฑ ูโฺฉูู
- ููุน ูพุงู ุฑู ุชุดุฎุต ูโุฏู (PO, QU, OL, ORG, etc.)
- ุจุฑ ุงุณุงุณ ููุน ูพุงูุ ุณุงุชโูุง ููุงุณุจ ุฑู ุงูุชุฎุงุจ ูโฺฉูู
- ุฏุฑ ุณุงุชโูุง ูุฑุจูุทู ุฌุณุชุฌู ูโฺฉูู
- ูพุงูโูุง ุจุง payout ูพุงู ุฑู ุญุฐู ูโฺฉูู
- ูพุงูโูุง ููุงุณุจ ุฑู ูุฑุงุด ูโฺฉูู

### ๐จ ูุฑูุชโูุง ูพุงู ูพุดุชุจุงู ุดุฏู:
- `PO: EURRUB-OTCp 1min BUY trc` - ููุท ุฏุฑ P.Finance
- `QU: EURRUB-OTCp 1min BUY trc` - ููุท ุฏุฑ P.Finance  
- `OL: EURRUB-OTCp 1min BUY trc` - ููุท ุฏุฑ P.Finance
- `ORG: EURRUB-OTCp 1min BUY trc` - ุฏุฑ ููู ุณุงุชโูุง
- `BTC-OTC` - ูพุงู ุณุงุฏู
- `ETH` - ุงุฑุฒ ุณุงุฏู

## ๐ ุงุถุงูู ฺฉุฑุฏู ุณุงุช ุฌุฏุฏ

ุจุฑุง ุงุถุงูู ฺฉุฑุฏู ุณุงุช ุฌุฏุฏุ ฺฉ ูุงู ุฌุฏุฏ ุฏุฑ `src/services/sites/` ุงุฌุงุฏ ฺฉูุฏ:

### 1. ุงุฌุงุฏ ูุงู ุณุงุช ุฌุฏุฏ
```javascript
// src/services/sites/NewSite.js
const BaseSite = require('./BaseSite');

class NewSite extends BaseSite {
  constructor() {
    const selectors = {
      searchField: '.search-input',
      resultsContainer: '.results .item',
      currencyLabel: '.currency-name',
      payoutLabel: '.payout-value'
    };

    const setupSteps = [
      { action: 'waitForSelector', selector: '.search-input', timeout: 5000 },
      { action: 'click', selector: '.accept-cookies' },
      { action: 'wait', delay: 1000 }
    ];

    super('New Site', 'https://newsite.com', selectors, setupSteps);
  }

  async searchCurrency(page, currencyName) {
    // ูพุงุฏูโุณุงุฒ ุฌุณุชุฌู ุฏุฑ ุณุงุช ุฌุฏุฏ
    // ุงู ูุชุฏ ุจุงุฏ ุฏุฑ ูุฑ ฺฉูุงุณ ูุฑุฒูุฏ override ุดูุฏ
  }
}

module.exports = NewSite;
```

### 2. ุงุถุงูู ฺฉุฑุฏู ุจู index
```javascript
// src/services/sites/index.js
const NewSite = require('./NewSite');

const availableSites = {
  // ุณุงุชโูุง ููุฌูุฏ...
  newsite: NewSite
};
```

### 3. ูุนุงู ฺฉุฑุฏู ุฏุฑ ScrapingService
```javascript
// src/services/ScrapingService.js
this.sites = [
  new PFinanceSite(),
  new NewSite(), // ุงุถุงูู ฺฉุฑุฏู ุณุงุช ุฌุฏุฏ
];
```

## ๐ ุงุฌุฑุง ูพุฑูฺู

### ุงุฌุฑุง ุณุฑูุฑ API
```bash
npm start
# ุง
npm run dev
```

### ุงุฌุฑุง ุฑุจุงุช ุชูฺฏุฑุงู
```bash
npm run bot
# ุง
npm run dev:bot
```

### ุงุฌุฑุง ููุฒูุงู
```bash
# ุฏุฑ ุชุฑููุงู ุงูู
npm start

# ุฏุฑ ุชุฑููุงู ุฏูู
npm run bot
```

## ๐ ุฏุชุงุจุณ

### ูุฏู Currency
```javascript
{
  currencyName: String,      // ูุงู ุงุฑุฒ
  searchTerm: String,        // ุนุจุงุฑุช ุฌุณุชุฌู
  results: [{               // ูุชุงุฌ ุงุฒ ุณุงุชโูุง ูุฎุชูู
    site: String,
    currency: String,
    payout: String,
    timestamp: Date
  }],
  telegramMessageId: Number, // ุขุฏ ูพุงู ุชูฺฏุฑุงู
  telegramChannelId: String, // ุขุฏ ฺฉุงูุงู ุชูฺฏุฑุงู
  status: String,           // ูุถุนุช: pending, processed, deleted, edited
  createdAt: Date,
  updatedAt: Date
}
```

## ๐ง ุชูุธูุงุช

### ูุชุบุฑูุง ูุญุท
- `PORT`: ูพูุฑุช ุณุฑูุฑ (ูพุดโูุฑุถ: 5000)
- `MONGODB_URI`: ุขุฏุฑุณ ุฏุชุงุจุณ (ูพุดโูุฑุถ: mongodb://localhost:27017/currencies)

### ุชูุธูุงุช ุชูฺฏุฑุงู
- `TELEGRAM_BOT_TOKEN`: ุชูฺฉู ุฑุจุงุช ุชูฺฏุฑุงู
- `CHANNEL_ID`: ุขุฏ ฺฉุงูุงู ุชูฺฏุฑุงู

## ๐ ูุงฺฏโูุง

- ูุงฺฏโูุง ุณุฑูุฑ ุฏุฑ console ููุงุด ุฏุงุฏู ูโุดููุฏ
- ูุงฺฏโูุง ุฑุจุงุช ุฏุฑ ูุงู `bot.log` ุฐุฎุฑู ูโุดููุฏ

## ๐๏ธ ุชูุณุนู

### ุงุถุงูู ฺฉุฑุฏู ูฺฺฏ ุฌุฏุฏ
1. ุณุฑูุณ ุฌุฏุฏ ุฏุฑ `src/services/` ุงุฌุงุฏ ฺฉูุฏ
2. ฺฉูุชุฑูุฑ ูุฑุจูุทู ุฏุฑ `src/controllers/` ุงุถุงูู ฺฉูุฏ
3. ูุณุฑ API ุฏุฑ `src/server.js` ุชุนุฑู ฺฉูุฏ

### ุชุณุช ฺฉุฑุฏู
```bash
# ุชุณุช API
curl -X POST http://localhost:5000/api/search \
  -H "Content-Type: application/json" \
  -d '{"currency": "BTC"}'

# ุจุฑุฑุณ ูุถุนุช
curl http://localhost:5000/health
```

## ๐ ูพุดุชุจุงู

ุจุฑุง ฺฏุฒุงุฑุด ูุดฺฉู ุง ูพุดููุงุฏ ูฺฺฏ ุฌุฏุฏุ ูุทูุงู issue ุงุฌุงุฏ ฺฉูุฏ.

## ๐ ูุงุณูุณ

ุงู ูพุฑูฺู ุชุญุช ูุงุณูุณ ISC ููุชุดุฑ ุดุฏู ุงุณุช. 