<!-- Sites Management Page -->
<div class="page-header">
    <h1>ğŸŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§</h1>
    <p>Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯ Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¢Ù†Ù‡Ø§</p>
</div>

<!-- Sites List -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">ğŸ“Š Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„</h2>
        <button class="btn btn-primary" onclick="addNewSite()">
            <i class="fas fa-plus"></i>
            Ø§ÙØ²ÙˆØ¯Ù† Ø³Ø§ÛŒØª Ø¬Ø¯ÛŒØ¯
        </button>
    </div>
    
    <div class="table-container">
        <table class="table">
            <thead>
                <tr>
                    <th>Ù†Ø§Ù… Ø³Ø§ÛŒØª</th>
                    <th>Ø¢Ø¯Ø±Ø³</th>
                    <th>ÙˆØ¶Ø¹ÛŒØª</th>
                    <th>Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø´Ø¯Ù‡</th>
                    <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
                </tr>
            </thead>
            <tbody>
                <% sites.forEach(site => { %>
                    <tr>
                        <td>
                            <strong><%= site.name %></strong>
                            <br><small class="text-light">Ú©Ù„ÛŒØ¯: <%= site.key %></small>
                        </td>
                        <td>
                            <a href="<%= site.url %>" target="_blank" class="text-primary">
                                <%= site.url %>
                            </a>
                        </td>
                        <td>
                            <span class="badge badge-<%= site.status === 'active' ? 'success' : 'danger' %>">
                                <%= site.status === 'active' ? 'ÙØ¹Ø§Ù„' : 'ØºÛŒØ±ÙØ¹Ø§Ù„' %>
                            </span>
                        </td>
                        <td>
                            <% site.patterns.forEach(pattern => { %>
                                <span class="badge badge-info"><%= pattern %></span>
                            <% }); %>
                        </td>
                        <td>
                            <button class="btn btn-sm btn-primary" onclick="editSite('<%= site.key %>')">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-<%= site.status === 'active' ? 'warning' : 'success' %>" 
                                    onclick="toggleSiteStatus('<%= site.key %>', '<%= site.status %>')">
                                <i class="fas fa-<%= site.status === 'active' ? 'pause' : 'play' %>"></i>
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="deleteSite('<%= site.key %>')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    </div>
</div>

<!-- Site Configuration -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³Ø§ÛŒØªâ€ŒÙ‡Ø§</h2>
    </div>
    
    <div class="row">
        <div class="col-md-6">
            <h3>P.Finance</h3>
            <p><strong>Ø¢Ø¯Ø±Ø³:</strong> https://p.finance/en/cabinet/try-demo/</p>
            <p><strong>Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø´Ø¯Ù‡:</strong> PO, QU, OL, ORG, SIMPLE</p>
            <p><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> <span class="badge badge-success">ÙØ¹Ø§Ù„</span></p>
            
            <h4>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯:</h4>
            <ul>
                <li>Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù„ÙˆØ¯ Ú©Ø§Ù…Ù„ ØµÙØ­Ù‡: 3 Ø«Ø§Ù†ÛŒÙ‡</li>
                <li>Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ: 2 Ø«Ø§Ù†ÛŒÙ‡</li>
                <li>Ø­Ø¯Ø§Ù‚Ù„ payout: 70%</li>
            </ul>
        </div>
        
        <div class="col-md-6">
            <h3>Example Site</h3>
            <p><strong>Ø¢Ø¯Ø±Ø³:</strong> https://example.com</p>
            <p><strong>Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø´Ø¯Ù‡:</strong> ORG</p>
            <p><strong>ÙˆØ¶Ø¹ÛŒØª:</strong> <span class="badge badge-danger">ØºÛŒØ±ÙØ¹Ø§Ù„</span></p>
            
            <h4>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§Ø³Ú©Ø±Ù¾ÛŒÙ†Ú¯:</h4>
            <ul>
                <li>Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø§ÛŒ Ù„ÙˆØ¯ Ú©Ø§Ù…Ù„ ØµÙØ­Ù‡: 2 Ø«Ø§Ù†ÛŒÙ‡</li>
                <li>Ø§Ù†ØªØ¸Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬Ùˆ: 1 Ø«Ø§Ù†ÛŒÙ‡</li>
                <li>Ø­Ø¯Ø§Ù‚Ù„ payout: 50%</li>
            </ul>
        </div>
    </div>
</div>

<!-- Add/Edit Site Modal -->
<div id="siteModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modalTitle">Ø§ÙØ²ÙˆØ¯Ù† Ø³Ø§ÛŒØª Ø¬Ø¯ÛŒØ¯</h3>
            <span class="close" onclick="closeModal()">&times;</span>
        </div>
        
        <form id="siteForm">
            <div class="form-group">
                <label for="siteName" class="form-label">Ù†Ø§Ù… Ø³Ø§ÛŒØª</label>
                <input type="text" id="siteName" name="name" class="form-control" required>
            </div>
            
            <div class="form-group">
                <label for="siteKey" class="form-label">Ú©Ù„ÛŒØ¯ Ø³Ø§ÛŒØª</label>
                <input type="text" id="siteKey" name="key" class="form-control" required>
            </div>
            
            <div class="form-group">
                <label for="siteUrl" class="form-label">Ø¢Ø¯Ø±Ø³ Ø³Ø§ÛŒØª</label>
                <input type="url" id="siteUrl" name="url" class="form-control" required>
            </div>
            
            <div class="form-group">
                <label for="sitePatterns" class="form-label">Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø´Ø¯Ù‡</label>
                <select id="sitePatterns" name="patterns" class="form-control" multiple>
                    <option value="PO">PO</option>
                    <option value="QU">QU</option>
                    <option value="OL">OL</option>
                    <option value="ORG">ORG</option>
                    <option value="SIMPLE">SIMPLE</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="siteStatus" class="form-label">ÙˆØ¶Ø¹ÛŒØª</label>
                <select id="siteStatus" name="status" class="form-control">
                    <option value="active">ÙØ¹Ø§Ù„</option>
                    <option value="inactive">ØºÛŒØ±ÙØ¹Ø§Ù„</option>
                </select>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Ø°Ø®ÛŒØ±Ù‡</button>
                <button type="button" class="btn btn-secondary" onclick="closeModal()">Ù„ØºÙˆ</button>
            </div>
        </form>
    </div>
</div>

<style>
.modal {
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
}

.modal-content {
    background-color: white;
    margin: 5% auto;
    padding: 2rem;
    border-radius: 0.75rem;
    width: 80%;
    max-width: 600px;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-color);
}

.close {
    font-size: 2rem;
    cursor: pointer;
    color: var(--text-light);
}

.close:hover {
    color: var(--text-color);
}

.form-actions {
    display: flex;
    gap: 1rem;
    justify-content: flex-end;
    margin-top: 2rem;
}

.row {
    display: flex;
    gap: 2rem;
}

.col-md-6 {
    flex: 1;
}
</style>

<script>
function addNewSite() {
    document.getElementById('modalTitle').textContent = 'Ø§ÙØ²ÙˆØ¯Ù† Ø³Ø§ÛŒØª Ø¬Ø¯ÛŒØ¯';
    document.getElementById('siteForm').reset();
    document.getElementById('siteModal').style.display = 'block';
}

function editSite(siteKey) {
    document.getElementById('modalTitle').textContent = 'ÙˆÛŒØ±Ø§ÛŒØ´ Ø³Ø§ÛŒØª';
    // Load site data and populate form
    document.getElementById('siteModal').style.display = 'block';
}

function closeModal() {
    document.getElementById('siteModal').style.display = 'none';
}

function toggleSiteStatus(siteKey, currentStatus) {
    const newStatus = currentStatus === 'active' ? 'inactive' : 'active';
    const action = newStatus === 'active' ? 'ÙØ¹Ø§Ù„' : 'ØºÛŒØ±ÙØ¹Ø§Ù„';
    
    if (confirm(`Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§ÛŒÙ† Ø³Ø§ÛŒØª Ø±Ø§ ${action} Ú©Ù†ÛŒØ¯ØŸ`)) {
        // API call to toggle status
        console.log(`Toggling ${siteKey} to ${newStatus}`);
    }
}

function deleteSite(siteKey) {
    if (confirm('Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§ÛŒÙ† Ø³Ø§ÛŒØª Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ')) {
        // API call to delete site
        console.log(`Deleting site: ${siteKey}`);
    }
}

document.getElementById('siteForm').addEventListener('submit', function(e) {
    e.preventDefault();
    // Handle form submission
    console.log('Saving site configuration...');
    closeModal();
});

// Close modal when clicking outside
window.onclick = function(event) {
    const modal = document.getElementById('siteModal');
    if (event.target === modal) {
        closeModal();
    }
}
</script> 