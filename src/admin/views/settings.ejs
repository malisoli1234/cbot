<!-- Settings Page -->
<div class="page-header">
    <h1>โ๏ธ ุชูุธูุงุช</h1>
    <p>ูุฏุฑุช ุชูุธูุงุช ฺฉู ุณุณุชู</p>
</div>

<!-- General Settings -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">๐ง ุชูุธูุงุช ุนููู</h2>
    </div>
    
    <form id="settings-form">
        <div class="form-group">
            <label for="minPayout" class="form-label">ุญุฏุงูู Payout (%)</label>
            <input type="number" id="minPayout" name="minPayout" class="form-control" 
                   value="<%= config.minPayout %>" min="0" max="100" required>
            <small class="text-light">ูพุงูโูุง ฺฉู payout ฺฉูุชุฑ ุงุฒ ุงู ููุฏุงุฑ ุฏุงุดุชู ุจุงุดูุฏ ุญุฐู ูโุดููุฏ</small>
        </div>
        
        <div class="form-group">
            <label for="telegramToken" class="form-label">ุชูฺฉู ุชูฺฏุฑุงู</label>
            <input type="password" id="telegramToken" name="telegramToken" class="form-control" 
                   value="***" readonly>
            <small class="text-light">ุชูฺฉู ุฑุจุงุช ุชูฺฏุฑุงู ุจุฑุง ุงุชุตุงู ุจู ฺฉุงูุงู</small>
        </div>
        
        <div class="form-group">
            <label for="channelId" class="form-label">ุดูุงุณู ฺฉุงูุงู</label>
            <input type="text" id="channelId" name="channelId" class="form-control" 
                   value="@example_channel" readonly>
            <small class="text-light">ุดูุงุณู ฺฉุงูุงู ุชูฺฏุฑุงู ุจุฑุง ูุงูุชูุฑ ฺฉุฑุฏู</small>
        </div>
        
        <div class="form-group">
            <label for="apiPort" class="form-label">ูพูุฑุช API</label>
            <input type="number" id="apiPort" name="apiPort" class="form-control" 
                   value="5000" min="1000" max="9999">
            <small class="text-light">ูพูุฑุช ุณุฑูุฑ API</small>
        </div>
        
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i>
            ุฐุฎุฑู ุชูุธูุงุช
        </button>
    </form>
</div>

<!-- Scraping Settings -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">๐ท๏ธ ุชูุธูุงุช ุงุณฺฉุฑูพูฺฏ</h2>
    </div>
    
    <div class="row">
        <div class="col-md-6">
            <h3>ุชูุธูุงุช Browser</h3>
            
            <div class="form-group">
                <label for="headless" class="form-label">ุญุงูุช Headless</label>
                <select id="headless" name="headless" class="form-control">
                    <option value="true" selected>ูุนุงู</option>
                    <option value="false">ุบุฑูุนุงู</option>
                </select>
                <small class="text-light">ุงุฌุฑุง ูุฑูุฑฺฏุฑ ุจุฏูู ููุงุด ุฑุงุจุท ฺฉุงุฑุจุฑ</small>
            </div>
            
            <div class="form-group">
                <label for="timeout" class="form-label">Timeout (ุซุงูู)</label>
                <input type="number" id="timeout" name="timeout" class="form-control" 
                       value="30" min="10" max="120">
                <small class="text-light">ุญุฏุงฺฉุซุฑ ุฒูุงู ุงูุชุธุงุฑ ุจุฑุง ููุฏ ุตูุญู</small>
            </div>
            
            <div class="form-group">
                <label for="waitTime" class="form-label">ุฒูุงู ุงูุชุธุงุฑ (ุซุงูู)</label>
                <input type="number" id="waitTime" name="waitTime" class="form-control" 
                       value="3" min="1" max="10">
                <small class="text-light">ุฒูุงู ุงูุชุธุงุฑ ุจุนุฏ ุงุฒ ููุฏ ุตูุญู</small>
            </div>
        </div>
        
        <div class="col-md-6">
            <h3>ุชูุธูุงุช Queue</h3>
            
            <div class="form-group">
                <label for="queueConcurrency" class="form-label">ุชุนุฏุงุฏ ููุฒูุงู</label>
                <input type="number" id="queueConcurrency" name="queueConcurrency" class="form-control" 
                       value="5" min="1" max="20">
                <small class="text-light">ุชุนุฏุงุฏ ูพุงูโูุง ููุฒูุงู ุฏุฑ ุตู</small>
            </div>
            
            <div class="form-group">
                <label for="retryAttempts" class="form-label">ุชุนุฏุงุฏ ุชูุงุด ูุฌุฏุฏ</label>
                <input type="number" id="retryAttempts" name="retryAttempts" class="form-control" 
                       value="3" min="1" max="10">
                <small class="text-light">ุชุนุฏุงุฏ ุชูุงุดโูุง ูุฌุฏุฏ ุฏุฑ ุตูุฑุช ุฎุทุง</small>
            </div>
            
            <div class="form-group">
                <label for="retryDelay" class="form-label">ุชุงุฎุฑ ุชูุงุด ูุฌุฏุฏ (ุซุงูู)</label>
                <input type="number" id="retryDelay" name="retryDelay" class="form-control" 
                       value="5" min="1" max="30">
                <small class="text-light">ุฒูุงู ุงูุชุธุงุฑ ุจู ุชูุงุดโูุง ูุฌุฏุฏ</small>
            </div>
        </div>
    </div>
</div>

<!-- Database Settings -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">๐๏ธ ุชูุธูุงุช ุฏุชุงุจุณ</h2>
    </div>
    
    <div class="form-group">
        <label for="dbUrl" class="form-label">ุขุฏุฑุณ ุฏุชุงุจุณ</label>
        <input type="text" id="dbUrl" name="dbUrl" class="form-control" 
               value="mongodb://localhost:27017/currencies" readonly>
        <small class="text-light">ุขุฏุฑุณ ุงุชุตุงู ุจู MongoDB</small>
    </div>
    
    <div class="form-group">
        <label for="dbName" class="form-label">ูุงู ุฏุชุงุจุณ</label>
        <input type="text" id="dbName" name="dbName" class="form-control" 
               value="currencies" readonly>
        <small class="text-light">ูุงู ุฏุชุงุจุณ MongoDB</small>
    </div>
    
    <div class="d-flex justify-between">
        <button class="btn btn-success" onclick="testDatabaseConnection()">
            <i class="fas fa-database"></i>
            ุชุณุช ุงุชุตุงู ุฏุชุงุจุณ
        </button>
        
        <button class="btn btn-warning" onclick="backupDatabase()">
            <i class="fas fa-download"></i>
            ูพุดุชุจุงูโฺฏุฑ
        </button>
        
        <button class="btn btn-danger" onclick="clearDatabase()">
            <i class="fas fa-trash"></i>
            ูพุงฺฉ ฺฉุฑุฏู ุฏุชุงุจุณ
        </button>
    </div>
</div>

<!-- System Information -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">โน๏ธ ุงุทูุงุนุงุช ุณุณุชู</h2>
    </div>
    
    <div class="row">
        <div class="col-md-6">
            <h3>ุงุทูุงุนุงุช ุณุฑูุฑ</h3>
            <table class="table">
                <tr>
                    <td><strong>Node.js Version:</strong></td>
                    <td id="nodeVersion">Loading...</td>
                </tr>
                <tr>
                    <td><strong>Platform:</strong></td>
                    <td id="platform">Loading...</td>
                </tr>
                <tr>
                    <td><strong>Memory Usage:</strong></td>
                    <td id="memoryUsage">Loading...</td>
                </tr>
                <tr>
                    <td><strong>Uptime:</strong></td>
                    <td id="uptime">Loading...</td>
                </tr>
            </table>
        </div>
        
        <div class="col-md-6">
            <h3>ุขูุงุฑ ุณุณุชู</h3>
            <table class="table">
                <tr>
                    <td><strong>ฺฉู ุฑฺฉูุฑุฏูุง:</strong></td>
                    <td id="totalRecords">Loading...</td>
                </tr>
                <tr>
                    <td><strong>ุฑฺฉูุฑุฏูุง ุงูุฑูุฒ:</strong></td>
                    <td id="todayRecords">Loading...</td>
                </tr>
                <tr>
                    <td><strong>ุณุงุชโูุง ูุนุงู:</strong></td>
                    <td id="activeSites">Loading...</td>
                </tr>
                <tr>
                    <td><strong>ูุถุนุช ุฑุจุงุช:</strong></td>
                    <td id="botStatus">Loading...</td>
                </tr>
            </table>
        </div>
    </div>
</div>

<script>
// Load system information
async function loadSystemInfo() {
    try {
        const response = await fetch('/admin/api/system-info');
        const data = await response.json();
        
        if (data.success) {
            document.getElementById('nodeVersion').textContent = data.info.nodeVersion;
            document.getElementById('platform').textContent = data.info.platform;
            document.getElementById('memoryUsage').textContent = data.info.memoryUsage;
            document.getElementById('uptime').textContent = data.info.uptime;
            document.getElementById('totalRecords').textContent = data.stats.totalRecords;
            document.getElementById('todayRecords').textContent = data.stats.todayRecords;
            document.getElementById('activeSites').textContent = data.stats.activeSites;
            document.getElementById('botStatus').textContent = data.stats.botStatus;
        }
    } catch (error) {
        console.error('Error loading system info:', error);
    }
}

function testDatabaseConnection() {
    // API call to test database connection
    console.log('Testing database connection...');
    adminPanel.showAlert('ุชุณุช ุงุชุตุงู ุฏุชุงุจุณ ุฏุฑ ุญุงู ุงูุฌุงู ุงุณุช...', 'info');
}

function backupDatabase() {
    if (confirm('ุขุง ูุทูุฆู ูุณุชุฏ ฺฉู ูโุฎูุงูุฏ ุงุฒ ุฏุชุงุจุณ ูพุดุชุจุงู ุชูู ฺฉูุฏุ')) {
        // API call to backup database
        console.log('Backing up database...');
        adminPanel.showAlert('ูพุดุชุจุงูโฺฏุฑ ุฏุฑ ุญุงู ุงูุฌุงู ุงุณุช...', 'info');
    }
}

function clearDatabase() {
    if (confirm('โ๏ธ ูุดุฏุงุฑ: ุงู ุนููุงุช ุชูุงู ุฑฺฉูุฑุฏูุง ุฑุง ุญุฐู ูโฺฉูุฏ. ุขุง ูุทูุฆู ูุณุชุฏุ')) {
        if (confirm('ุขุง ูุงูุนุงู ูุทูุฆู ูุณุชุฏุ ุงู ุนููุงุช ุบุฑูุงุจู ุจุงุฒฺฏุดุช ุงุณุช!')) {
            // API call to clear database
            console.log('Clearing database...');
            adminPanel.showAlert('ูพุงฺฉ ฺฉุฑุฏู ุฏุชุงุจุณ ุฏุฑ ุญุงู ุงูุฌุงู ุงุณุช...', 'warning');
        }
    }
}

// Load system info when page loads
document.addEventListener('DOMContentLoaded', () => {
    loadSystemInfo();
    // Refresh system info every 30 seconds
    setInterval(loadSystemInfo, 30000);
});
</script> 